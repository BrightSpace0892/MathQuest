import {api} from './runtime.js';async function ensureCode(){const u=localStorage.getItem('mq.user')||'admin';const r=await api('/groups/ensure-code?username='+u);document.getElementById('friend-code').textContent=r.code}async function createGroup(){const u=localStorage.getItem('mq.user')||'admin';const name=prompt('Group name');if(!name)return;const r=await api('/groups/create',{method:'POST',body:JSON.stringify({username:u,name})});alert('Created '+r.code);localStorage.setItem('mq.group.id',r.groupId);}async function joinGroup(){const u=localStorage.getItem('mq.user')||'admin';const code=prompt('Enter code');if(!code)return;await api('/groups/join',{method:'POST',body:JSON.stringify({username:u,code})});alert('Joined!')}document.addEventListener('DOMContentLoaded',()=>{ensureCode();document.getElementById('btn-create-group').onclick=createGroup;document.getElementById('btn-join-group').onclick=joinGroup});